<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TestBedz - Request for Quotation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .btn-primary {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: all 0.3s ease;
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4);
        }
        .btn-primary:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: translateY(0);
            box-shadow: none;
        }
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background-color: #3b82f6;
            color: white;
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center space-x-2">
                <svg class="h-8 w-8 text-blue-600" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-xl font-bold text-gray-800">TestBedz</span>
            </a>
            <a href="#rfq-form" class="btn-primary font-semibold px-5 py-2 rounded-lg">Start Your Test Request</a>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="container mx-auto px-6 py-24 text-center">
            <h1 class="font-poppins text-4xl md:text-6xl font-bold text-gray-900 leading-tight">
                Get Competing Quotes for Your Aerospace Testing.
            </h1>
            <p class="text-xl md:text-2xl mt-4 text-gray-600 max-w-3xl mx-auto">
                Submit your test requirements once. We'll match you with qualified university labs and facilitate the quotation process for you.
            </p>
            <div class="mt-8">
                <a href="#rfq-form" class="btn-primary text-white font-bold px-8 py-4 rounded-lg text-lg">Create Your RFQ</a>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">Our Simple 3-Step Process</h2>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="p-4">
                        <div class="flex items-center justify-center h-16 w-16 mx-auto bg-blue-100 text-blue-600 rounded-full text-2xl font-bold">1</div>
                        <h3 class="font-poppins text-xl font-bold mt-6">Define Your Test</h3>
                        <p class="mt-2 text-gray-600">Use our guided form to detail your technical requirements, logistics, and availability.</p>
                    </div>
                    <div class="p-4">
                        <div class="flex items-center justify-center h-16 w-16 mx-auto bg-blue-100 text-blue-600 rounded-full text-2xl font-bold">2</div>
                        <h3 class="font-poppins text-xl font-bold mt-6">We Find Matches</h3>
                        <p class="mt-2 text-gray-600">Our platform instantly filters our network to find qualified facilities that meet your needs.</p>
                    </div>
                    <div class="p-4">
                        <div class="flex items-center justify-center h-16 w-16 mx-auto bg-blue-100 text-blue-600 rounded-full text-2xl font-bold">3</div>
                        <h3 class="font-poppins text-xl font-bold mt-6">Receive Quotes</h3>
                        <p class="mt-2 text-gray-600">We send your Request for Quotation (RFQ) to the matched labs. You'll receive their proposals directly.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- RFQ Form Section -->
        <section id="rfq-form" class="py-20">
            <div class="container mx-auto px-6">
                <div class="bg-white max-w-4xl mx-auto p-8 md:p-12 rounded-xl shadow-2xl border border-gray-200">
                    <h2 class="font-poppins text-3xl font-bold text-center text-gray-900 mb-4">Create Your Test Request</h2>
                    <p class="text-lg text-center text-gray-600 mb-8">This information will be used to generate a formal RFQ for our facility network.</p>
                    
                    <!-- Step Indicators -->
                    <div class="flex justify-center items-center space-x-4 mb-8">
                        <div id="step-indicator-1" class="step-indicator active w-10 h-10 flex items-center justify-center rounded-full font-bold">1</div>
                        <div class="flex-grow h-0.5 bg-gray-300"></div>
                        <div id="step-indicator-2" class="step-indicator bg-gray-200 text-gray-500 w-10 h-10 flex items-center justify-center rounded-full font-bold">2</div>
                        <div class="flex-grow h-0.5 bg-gray-300"></div>
                        <div id="step-indicator-3" class="step-indicator bg-gray-200 text-gray-500 w-10 h-10 flex items-center justify-center rounded-full font-bold">3</div>
                    </div>

                    <form id="multi-step-form">
                        <!-- Step 1: Project Info -->
                        <div id="form-step-1" class="form-step active">
                            <h3 class="font-semibold text-xl mb-6 text-center">Step 1: Company & Contact Information</h3>
                            <div class="space-y-6">
                                <div>
                                    <label for="CompanyName" class="block text-sm font-medium text-gray-700">Company Name</label>
                                    <input type="text" name="CompanyName" id="CompanyName" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="ContactName" class="block text-sm font-medium text-gray-700">Primary Contact Name</label>
                                    <input type="text" name="ContactName" id="ContactName" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="ContactEmail" class="block text-sm font-medium text-gray-700">Contact Email</label>
                                    <input type="email" name="ContactEmail" id="ContactEmail" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Technical Requirements -->
                        <div id="form-step-2" class="form-step">
                            <h3 class="font-semibold text-xl mb-6 text-center">Step 2: Technical Requirements</h3>
                            <div class="space-y-6">
                                <div>
                                    <label for="TestType" class="block text-sm font-medium text-gray-700">Primary Test Type</label>
                                    <select name="TestType" id="TestType" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Select a test type...</option>
                                        <option value="Thermal">Thermal Cycling / Vacuum</option>
                                        <option value="Vibration">Vibration / Shock</option>
                                        <option value="EM">EM / EMC</option>
                                        <option value="Wind">Wind Tunnel</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="TestArticleName" class="block text-sm font-medium text-gray-700">Test Article Name / Model</label>
                                    <input type="text" name="TestArticleName" id="TestArticleName" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="ArticleDimensions" class="block text-sm font-medium text-gray-700">Approx. Dimensions (L x W x H cm)</label>
                                        <input type="text" name="ArticleDimensions" id="ArticleDimensions" placeholder="e.g., 30x20x10" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                    <div>
                                        <label for="ArticleWeight" class="block text-sm font-medium text-gray-700">Approx. Weight (kg)</label>
                                        <input type="number" name="ArticleWeight" id="ArticleWeight" placeholder="e.g., 5" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                <div>
                                    <label for="TestParameters" class="block text-sm font-medium text-gray-700">Key Test Parameters</label>
                                    <textarea name="TestParameters" id="TestParameters" rows="3" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Temp Range: -80C to +120C, 10 cycles. OR Freq Range: 5-2000 Hz, 10g RMS."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Logistics & Availability -->
                        <div id="form-step-3" class="form-step">
                            <h3 class="font-semibold text-xl mb-6 text-center">Step 3: Logistics & Availability</h3>
                             <div class="space-y-6">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="DesiredStartDate" class="block text-sm font-medium text-gray-700">Desired Start Date</label>
                                        <input type="date" name="DesiredStartDate" id="DesiredStartDate" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                    <div>
                                        <label for="TestDuration" class="block text-sm font-medium text-gray-700">Estimated Duration (days)</label>
                                        <input type="number" name="TestDuration" id="TestDuration" placeholder="e.g., 3" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                <div>
                                    <label for="AdditionalInfo" class="block text-sm font-medium text-gray-700">Additional Information or Requirements</label>
                                    <textarea name="AdditionalInfo" id="AdditionalInfo" rows="4" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Any special handling, ITAR restrictions, or other details?"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="mt-10 flex justify-between">
                            <button type="button" id="prev-btn" class="bg-gray-200 text-gray-700 font-semibold px-6 py-2 rounded-lg" style="display: none;">Back</button>
                            <button type="button" id="next-btn" class="btn-primary font-semibold px-6 py-2 rounded-lg ml-auto">Next</button>
                            <button type="submit" id="submit-btn" class="btn-primary font-semibold px-6 py-2 rounded-lg ml-auto" style="display: none;">Submit RFQ</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-md w-full">
            <div class="flex items-center justify-center h-16 w-16 mx-auto bg-green-100 rounded-full mb-6">
                <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h2 class="font-poppins text-2xl font-bold text-gray-900 mb-4">Request Sent!</h2>
            <p id="success-message" class="text-gray-600 mb-6"></p>
            <button id="close-success-btn" class="w-full btn-primary font-semibold py-3 rounded-lg">Done</button>
        </div>
    </div>


    <script>
        const facilities = [
            { name: 'SPRL Facility', capabilities: ['Thermal', 'Vibration'] },
            { name: 'Wilson Center', capabilities: ['Materials', 'EM'] },
            { name: 'CLASP Cold Chambers', capabilities: ['Thermal'] },
            { name: 'Low-Speed Wind Tunnel', capabilities: ['Wind'] },
            { name: 'Generic Test Lab A', capabilities: ['Vibration', 'EM'] },
            { name: 'Generic Test Lab B', capabilities: ['Other'] }
        ];
        
        // IMPORTANT: PASTE YOUR NEW GOOGLE APPS SCRIPT URL HERE
        const googleScriptURL = 'PASTE_YOUR_NEW_WEB_APP_URL_HERE';

        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const form = document.getElementById('multi-step-form');
        const formSteps = document.querySelectorAll('.form-step');
        const stepIndicators = document.querySelectorAll('.step-indicator');
        
        let currentStep = 1;

        function updateFormSteps() {
            formSteps.forEach((step, index) => {
                step.classList.toggle('active', index + 1 === currentStep);
            });
            stepIndicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index + 1 <= currentStep);
                indicator.classList.toggle('bg-gray-200', index + 1 > currentStep);
                indicator.classList.toggle('text-gray-500', index + 1 > currentStep);
            });
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            nextBtn.style.display = currentStep < formSteps.length ? 'block' : 'none';
            submitBtn.style.display = currentStep === formSteps.length ? 'block' : 'none';
        }

        function validateStep() {
            const currentFormStep = formSteps[currentStep - 1];
            const inputs = currentFormStep.querySelectorAll('input[required], select[required], textarea[required]');
            for (const input of inputs) {
                if (!input.value.trim()) {
                    input.focus();
                    // You can add a more robust validation message here
                    alert('Please fill out all required fields.');
                    return false;
                }
            }
            return true;
        }

        nextBtn.addEventListener('click', () => {
            if (validateStep() && currentStep < formSteps.length) {
                currentStep++;
                updateFormSteps();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateFormSteps();
            }
        });
        
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!validateStep()) return;
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';

            // 1. Get user requirements
            const formData = new FormData(form);
            const userTestType = formData.get('TestType');

            // 2. Filter facilities
            const matchedFacilities = facilities.filter(f => f.capabilities.includes(userTestType));
            const matchCount = matchedFacilities.length;

            // 3. Update success message
            document.getElementById('success-message').textContent = 
                `We have processed your request and identified ${matchCount} qualified facilities in our network. Your RFQ has been sent, and you should receive proposals from them directly within 2-3 business days.`;

            // 4. Send data to Google Sheets
            fetch(googleScriptURL, { method: 'POST', body: formData })
                .then(res => res.json())
                .then(data => {
                    console.log('Success:', data);
                    // 5. Show success modal
                    document.getElementById('success-modal').classList.remove('hidden');
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    // Still show success to the user, but log the error
                     document.getElementById('success-modal').classList.remove('hidden');
                })
                .finally(() => {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Submit RFQ';
                });
        });

        document.getElementById('close-success-btn').addEventListener('click', () => {
             document.getElementById('success-modal').classList.add('hidden');
             // Reset form
             currentStep = 1;
             form.reset();
             updateFormSteps();
        });

        updateFormSteps();
    </script>
</body>
</html>
